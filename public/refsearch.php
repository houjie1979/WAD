<?phprequire_once("../includes/initialize.php");if (!$session->is_logged_in()) { redirect_to("index.php"); }$per_page = 25;$page =!empty($_GET['page']) ? (int)$_GET['page'] : 1;if(!$session->is_logged_in()) $page = 1;if (isset($_POST['submit'])) { // Form has been submitted.  $refcode = trim($_POST['refcode']);  $authors = trim($_POST['authors']);    $journal = trim($_POST['journal']);    $vol = trim($_POST['volume']);    $issue = trim($_POST['issue']);    $pages = trim($_POST['pages']);    $year = trim($_POST['year']);    $title = trim($_POST['title']);    $language = trim($_POST['language']);    $keywords = trim($_POST['keywords']);    $refsql = References::ref_sql_where($refcode, $authors, $journal, $vol, 			$issue, $pages, $year, $title, $language, $keywords);		} else { // Form has not been submitted.  $refcode = "";  $authors = "";  $journal = "";  $vol = "";  $issue = "";  $pages = "";  $year = "";  $title = "";  $language = "";  $keywords = "";  if(!empty($_GET['sql'])) { $refsql = stripslashes($_GET['sql']); }  else $refsql = "";} 		$total_count = References::count_in_sql($refsql);	$pagination = new Pagination($page, $per_page, $total_count);  	$found_records = References::find_by_sql_lim($refsql, $per_page, $pagination->offset());?><?php include_layout_template('header.php'); ?><ul id="navlinks">		<li><a href="index.php">User Login</a></li>		<li> References</li>		<li><a href="datasearch.php"> Data</a></li>		<li><a href="keysearch.php"> Keywords</a></li>		<li><a href="isosearch.php"> Isotopes</a></li>		<li><a href="abbsearch.php"> Abbreviations</a></li>			</ul><div id="leftcol">		<form action="refsearch.php" method="post">		  <table>		    <tr>		      <td>Refcode:</td>		      <td>		        <input type="text" name="refcode" size="12" maxlength="6" value="<?php echo htmlentities($refcode); ?>" />		      </td>		    </tr>		    <tr>		      <td>Authors:</td>		      <td>		        <input type="text" name="authors" size="12" maxlength="15" value="<?php echo htmlentities($authors); ?>" />		      </td>		    </tr>			<tr>		      <td>Journal:</td>		      <td>		        <input type="text" name="journal" size="12" maxlength="25" value="<?php echo htmlentities($journal); ?>" />		      </td>		    </tr>		    <tr>		      <td>Volume:</td>		      <td>		        <input type="text" name="volume" size="12" maxlength="5" value="<?php echo htmlentities($vol); ?>" />		      </td>		    </tr>		    <tr>		      <td>Issue:</td>		      <td>		        <input type="text" name="issue" size="12" maxlength="5" value="<?php echo htmlentities($issue); ?>" />		      </td>		    </tr>		    <tr>		      <td>Pages:</td>		      <td>		        <input type="text" name="pages" size="12" maxlength="6" value="<?php echo htmlentities($pages); ?>" />		      </td>		    </tr>		    <tr>		      <td>Year:</td>		      <td>		        <input type="text" name="year" size="12" maxlength="4" value="<?php echo htmlentities($year); ?>" />		      </td>		    </tr>		    <tr>		      <td>Title:</td>		      <td>		        <input type="text" name="title" size="12" maxlength="15" value="<?php echo htmlentities($title); ?>" />		      </td>		    </tr>		    <tr>		      <td>Language:</td>		      <td>		        <input type="text" name="language" size="12" maxlength="3" value="<?php echo htmlentities($language); ?>" />		      </td>		    </tr>		    <tr>		      <td>Keywords:</td>		      <td>		        <input type="text" name="keywords" size="12" maxlength="15" value="<?php echo htmlentities($keywords); ?>" />		      </td>		    </tr>	    	<tr>		      <td colspan="2">		        <input type="submit" name="submit" value="Search" />		      </td>		    </tr>		  </table>		</form><?php 	$current_page = $pagination->next_page()-1;	echo "Found - ". $total_count . "<br/>Page ". $current_page ." out of ". $pagination->total_pages() . "<br/>";	if($pagination->total_pages() > 1) {			if($pagination->has_previous_page()){			echo " <a href=\"refsearch.php?page=";			echo $pagination->previous_page();			echo "&sql=".$refsql."\">&laquo; Previous</a> ";		}			if($pagination->has_next_page()){			echo " <a href=\"refsearch.php?page=";			echo $pagination->next_page();			echo "&sql=".$refsql."\">Next &raquo; </a> ";		}		}?></div>	<div id="data"><?php	if($total_count > 0) {		foreach($found_records as $record) echo $record->code_name() ."<br/>";	}	else {		echo "Tips for searching references: </br>		Enter one or more keyword codes separated by space in the Keyword box<br/>		like following: FE NI OXI <br/>		Check out the list of keyword codes in the Keywords section<br/>		Enter the name of an author in the Author box to search for the author<br/>		like following M&oumlssbauer<br/>		Use Title box to search for a word in the publication title<br/>		for example: neutrino<br/>		One can find papers in chinese using langage code CHN in Langauge box<br/>		Publications for a certain year can be easely found using a Year box<br/>		Enter accepted abbreviation of the journal title to find publications<br/>		in a particular journal, for example: J. Phys.: Condens. Matter<br/>		Publication search by volume, issue and pages is recomended to run <br/>		in combination with the journal search<br/>		The reference code of the publication when known can be used <br/>		to select a particular paper. The reference code is assigned to each<br/>		publication by MEDC as following: two last digits of the year +<br/>		the first letter of the first author last name + a consecutive number<br/>		for example 00M016<br/>		<br/>Registered user gets a full list of results, <br/>		in other case the output is limited to only one page.<br/>";				}?></div><div id="pagination" style="clear: both;"></div><?php include_layout_template('footer.php'); ?>