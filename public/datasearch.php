<?phprequire_once("../includes/initialize.php");if (!$session->is_logged_in()) { redirect_to("index.php"); }$per_page = 25;$page =!empty($_GET['page']) ? (int)$_GET['page'] : 1;if(!$session->is_logged_in()) $page = 1;if (isset($_POST['submit'])) { // Form has been submitted.  $refcode = trim($_POST['refcode']);  $isocode = trim($_POST['isocode']);    $source = trim($_POST['source']);    $absorber = trim($_POST['absorber']);    $stemp = trim($_POST['stemp']);    $atemp = trim($_POST['atemp']);    $ishift = trim($_POST['ishift']);    $qsplit = trim($_POST['qsplit']);    $ecomments = trim($_POST['ecomments']);    $keywords = trim($_POST['keywords']);     $refsql = Data::data_sql_where($refcode, $isocode, $source, $absorber, 			$stemp, $atemp, $ishift, $qsplit, $ecomments, $keywords);}     else { // Form has not been submitted.  $refcode = "";  $isocode = "";  $source = "";  $absorber = "";  $stemp = "";  $atemp = "";  $ishift = "";  $qsplit = "";  $ecomments = "";  $keywords = "";  if(!empty($_GET['sql'])) {  $refsql = stripslashes($_GET['sql']); }   else $refsql = "";}$total_count = Data::count_in_sql($refsql);$pagination = new Pagination($page, $per_page, $total_count);$found_records = Data::find_by_sql_lim($refsql, $per_page, $pagination->offset());?><?php include_layout_template('header.php'); ?><ul id="navlinks">		<li><a href="index.php">User Login</a></li>		<li><a href="refsearch.php"> References</a></li>		<li> Data</li>		<li><a href="keysearch.php"> Keywords</a></li>		<li><a href="isosearch.php"> Isotopes</a></li>		<li><a href="abbsearch.php"> Abbreviations</a></li>			</ul><div id="leftcol">		<form action="datasearch.php" method="post">		  <table>		    <tr>		      <td>Refcode:</td>		      <td>		        <input type="text" name="refcode" size="12" maxlength="6" value="<?php echo htmlentities($refcode); ?>" />		      </td>		    </tr>		    <tr>		      <td>Isocode:</td>		      <td>		        <input type="text" name="isocode" size="12" maxlength="3" value="<?php echo htmlentities($isocode); ?>" />		      </td>		    </tr>		    <tr>		      <td>Source:</td>		      <td>		        <input type="text" name="source" size="12" maxlength="20" value="<?php echo htmlentities($source); ?>" />		      </td>		    </tr>		    <tr>		      <td>Absorber:</td>		      <td>		        <input type="text" name="absorber" size="12" maxlength="20" value="<?php echo htmlentities($absorber); ?>" />		      </td>		    </tr>		    <tr>		      <td>Stemp:</td>		      <td>		        <input type="text" name="stemp" size="12" maxlength="11" value="<?php echo htmlentities($stemp); ?>" />		      </td>		    </tr>		    <tr>		      <td>Atemp:</td>		      <td>		        <input type="text" name="atemp" size="12" maxlength="11" value="<?php echo htmlentities($atemp); ?>" />		      </td>		    </tr>		    <tr>		      <td>IS:</td>		      <td>		        <input type="text" name="ishift" size="12" maxlength="9" value="<?php echo htmlentities($ishift); ?>" />		      </td>		    </tr>		    <tr>		      <td>QS:</td>		      <td>		        <input type="text" name="qsplit" size="12" maxlength="9" value="<?php echo htmlentities($qsplit); ?>" />		      </td>		    </tr>		    <tr>		      <td>Comments:</td>		      <td>		        <input type="text" name="ecomments" size="12" maxlength="30" value="<?php echo htmlentities($ecomments); ?>" />		      </td>		    </tr>		    <tr>		      <td>Keywords:</td>		      <td>		        <input type="text" name="keywords" size="12" maxlength="7" value="<?php echo htmlentities($keywords); ?>" />		      </td>		    </tr>		    <tr>		      <td colspan="2">		        <input type="submit" name="submit" value="Search" />		      </td>		    </tr>		  </table>		</form><?php 	$current_page = $pagination->next_page()-1;	echo "Found - ". $total_count . "<br/>Page ". $current_page ." out of ". $pagination->total_pages() . "<br/>";	if($pagination->total_pages() > 1) {			if($pagination->has_previous_page()){			echo " <a href=\"datasearch.php?page=";			echo $pagination->previous_page();			echo "&sql=".$refsql."\">&laquo; Previous</a> ";		}		if($pagination->has_next_page()){			echo " <a href=\"datasearch.php?page=";			echo $pagination->next_page();			echo "&sql=".$refsql."\">Next &raquo; </a> ";		}		}?></div>	<div id="data"><?php 	if($total_count > 0) {		echo "<table><tr><td>Isotope</td><td>Source</td><td>Source T</td>				 <td>Absorber</td><td>A Temp</td><td>Isomer Shift</td>				 <td>Quad Split</td><td>Comments</td><td>Refcode</td></tr>";		foreach($found_records as $record){			echo "<tr><td>".$record->isocode."</td><td>"				   .$record->source."</td><td>".$record->stemp."</td><td>"				   .$record->absorber."</td><td>".$record->atemp."</td><td>"				   .$record->ishift."</td><td>".$record->qsplit."</td><td>"				   .$record->ecomments."</td><td>".$record->refcode."</td></tr>";		}		echo  "</table>";	}	else {		echo "Tips for searching data records: </br>		Enter one or more keyword codes separated by space in the Keyword box<br/>		like following: FE NI OXI <br/>		Check out the list of keyword codes in the Keywords section<br/>		The search can be limited to a particular isotope using the isotope code<br/>		in the Isocode box. For the full list of isotope codes check out Isotopes<br/>		section. For example: FE7<br/>		Enter any part of the absorber name or formula in the Absorber box like<br/>		Escherichia to search by absorber<br/>		The source can be searched similar to absorber<br/>		To search isomer shift values enter two values for lower and upper limit<br/>		separated by space in IS box, for example 1.1 1.2 (lower-level upper-level)<br/>		To search quadrupole splitting values one can use a technique similar<br/>		to IS search or enter a center value and a range like 1.5 0.05 <br/>		(center range) in the QS box end hit search button<br/>		Absorber temperature and source temperature values can be restricted<br/>		in a search using (l-l u-l) or (c r) methods in Atemp and Stemp boxes<br/>		The Comments box can be used to search extra information concerning <br/>		the measurement. For example entering HI= one can pull out records<br/> 		of hyperfine field mentioned in the comments<br/>		The reference code of the publication when known can be used <br/>		to select data from a particular paper. The reference code is assigned<br/>		to each publication by MEDC as following: two last digits of the year +<br/>		the first letter of the first author last name + a consecutive number<br/>		for example 70B048<br/>		<br/>Registered user gets a full list of results, <br/>		in other case the output is limited to only one page.<br/>";				}	?></div><?php include_layout_template('footer.php'); ?>